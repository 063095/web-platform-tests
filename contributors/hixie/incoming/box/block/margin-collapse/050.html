<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html lang="en">
 <head>
  <title>Placement of out-of-flow object in elements that have been collapsed through</title>
  <style type="text/css">
   table { border-spacing: 1em 0.5em; }
   td { padding: 0; border: solid black; width: 10em; }
   /* First Column */
   .test { background: black; }
   .zero { /* empty except for float */ }
   .zero div { float: right; width: 50%; border-top: solid 1px aqua; }
   .h { height: 1em; background: teal; }
   .tm0 { margin-top: 0em; }
   .tm1, .tm { margin-top: 1em; }
   .tm2 { margin-top: 2em; }
   .bm { margin-bottom: 1em; }
   .bmn1 { margin-bottom: -1em; }
   /* Second Column */
   .control { background: red; }
   .control div { position: relative; }
   .control .teal { border-top: solid 1em teal; }
   .control .black { border-top: solid 1em black; }
   .control .aqua { border-top: solid 1px aqua; position: absolute; left: 0; z-index: 1; }
   .control .short { width: 50%; }
   .control .long { width: 100%; }
   .control .aqua-black-line { border-left: solid 5em aqua; background: black; height: 1px; }
  </style>
 </head>
 <body>
  <p>The following two columns should look like mirror images of each other with no red visible anywhere.</p>
  <table>
   <tr>
    <td class="test">
     <div class="h bm"></div>
     <div class="zero"><div></div></div>
     <div class="h tm"></div>
    </td>
    <td class="control">
     <div>
      <div class="teal"></div>
      <div class="black"></div>
      <div class="aqua short"></div>
      <div class="teal"></div>
     </div>
    </td>
   </tr>
   <tr>
    <td class="test">
     <div class="h bm"></div>
     <div class="zero tm0"><div></div></div>
     <div class="zero tm1"><div></div></div>
     <div class="zero tm2"><div></div></div>
     <div class="h tm"></div>
    </td>
    <td class="control">
     <div>
      <div class="teal"></div>
      <div class="black"></div>
      <div class="aqua long"></div>
      <div class="black"></div>
      <div class="aqua short"></div>
      <div class="teal"></div>
     </div>
    </td>
   </tr>
   <tr>
    <td class="test">
     <div class="h"></div>
     <div>
      <div class="zero"><div></div></div>
      <div class="h tm"></div>
     </div>
    </td>
    <td class="control">
     <div>
      <div class="teal"></div>
      <div class="black"></div>
      <div class="aqua short"></div>
      <div class="teal"></div>
     </div>
    </td>
   </tr>
   <tr>
    <td class="test">
     <div>
      <div class="h"></div>
      <div class="zero tm"><div></div></div>
     </div>
     <div class="h"></div>
    </td>
    <td class="control">
     <div>
      <div class="teal"></div>
      <div class="aqua short"></div>
      <div class="black"></div>
      <div class="teal"></div>
     </div>
    </td>
   </tr>
   <tr>
    <td class="test">
     <div class="h"></div>
     <div class="zero tm2 bmn1"><div></div></div>
     <div class="h"></div>
    </td>
    <td class="control">
     <div>
      <div class="teal"></div>
      <div class="black"></div>
      <div class="teal"></div>
      <div class="aqua-black-line"></div>
     </div>
    </td>
   </tr>
  </table>
 </body>
</html>

<!-- note. this test assumes that we accept the following proposed changes:
       http://lists.w3.org/Archives/Member/w3c-css-wg/2003AprJun/0446.html
  -->