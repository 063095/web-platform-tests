<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html lang="en">
 <head>
  <title>CSS background position: animated</title>
  <link rel="author" title="Ian Hickson" href="mailto:ian@hixie.ch"/>
  <link rel="alternate" href="http://www.hixie.ch/tests/adhoc/css/background/position/001.html"/>
  <link rel="help" href="http://www.w3.org/TR/CSS21/colors.html#background" />
  <meta name="flags" content="dom"/>
  <style type="text/css">
   #test {
     background: url(support/diamond.png) no-repeat;
     background-position: 0% 100%;
     position: relative;
     height: 20em; width: 20em;
     margin: 2em;
   }
   #ring {
     position: absolute; left: 0; top: 20em;
     margin: -20px 0 0 -20px;
   }
  </style>
  <script type="text/javascript">
   var position = 0; /* 0 .. 2*PI */
   function test() {
     with (Math) {
       position += PI / 1000;
       if (position >= 2 * PI) {
         position = 0;
       }
       document.styleSheets[0].cssRules[0].style.backgroundPosition = (sin(position) + 1) * 50 + '% ' + (cos(position) + 1) * 50 + '%';
       document.styleSheets[0].cssRules[1].style.left = (sin(position) + 1) * 10 + 'em';
       document.styleSheets[0].cssRules[1].style.top = (cos(position) + 1) * 10 + 'em';
       document.getElementById('status').firstChild.data = document.styleSheets[0].cssRules[0].style.backgroundPosition;
     }
   }
  </script>
 </head>
 <body onload="var query = location.search; if (query) { query = query.substring(1, query.length); } else { query = 10 } setInterval(test, query)">
  <p>There should be a circle with a diamond inside below. The diamond
  and the circle should both be moving along smoothly. However, the
  diamond should be moving around the edge of the outer circle, so
  that it is always on the side of the circle that points towards the
  center of the large circle that they are going around.</p>
  <div id="control"><div id="test"><img id="ring" src="support/ring.png" alt="O"></div></div>
  <p>Position: <span id="status">0% 0%</span></p>
 </body>
</html>
