<!DOCTYPE HTML>
<html>
 <head>
  <title>Web Storage</title>
  <script src="/resources/testharness.js"></script>
  <script src="/resources/testharnessreport.js"></script>
 </head>
 <body>
	<p>
		<h3>event_session_Constructor</h3>
	</p>
	
	<hr>

	<div id="log"></div>

	<script>

		var t = async_test("storageeventinit test");

		function onStorageEvent(event) {
			t.step(function() {
			   assert_true(true);
			  });
			t.done();
		}

		if (window.addEventListener) {
            window.addEventListener('storage', onStorageEvent, false);
        }
        else if (window.attachEvent) {
            window.attachEvent("onstorage", onStorageEvent);
        }
        else {
			test(function() {
				assert_unreached("DOM event subscribtion is not supported.");
			}, "existence of event listener")
        }

		if (('sessionStorage' in window) && window.sessionStorage !== null){

			var event = document.createEvent('StorageEvent');
			event.initStorageEvent("storage");

			window.dispatchEvent(event);
		} else {
			test(function() {
				assert_unreached("sessionStorage is not supported.");
			}, "sessionStorage interface test")
		}	
	</script>

 </body>
</html>